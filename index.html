<!doctype html>
<html>
  <head>
    <title>SAL Interpreter</title>
    <style>
        * {
          box-sizing: border-box;
          font-family: 'Roboto Mono', monospace;
          caret-color: white;
        }
        html, body {
          margin: 0;
          padding: 0;
          background-color: #08080a;
          color: white;
          width: 100%;
          height: 100%;
          --blue: #03d3fc;
          --green: #08ff63;
          --back: #241800;
        }

        h1 {
          height: 50px;
          line-height: 50px;
          text-align: center;
        }

        div.workspace {
          display: flex;
          flex-direction: row;
          gap: 5px;
          width: calc(100% - 40px);
          height: calc(100% - 110px);
          margin: 20px;
          position: relative;
        }

        div.editor {
          position: relative;
          flex-grow: 2;
          height: 100%;
          border-radius: 10px;
          padding: 10px;
          margin: 0;
          outline: none;
          border: none;
          resize: none;
          color: #dddddd;
          background-color: var(--back);
          font-size: 15pt;
          z-index: 1000;
          overflow-x: hidden;
          overflow-y: auto;
        }

        .code {
          position: absolute;
          top: 20px;
          left: 20px;
          width: calc(100% - 40px);
          height: calc(100% - 40px);
          outline: none;
          opacity: 0.2;
          z-index: 2;
        }

        .coloured {
          position: absolute;
          top: 20px;
          left: 20px;
          width: calc(100% - 40px);
          height: calc(100% - 40px);
          z-index: 1;
        }

        div.slider {
          position: relative;
          width: 10px;
          border-radius: 5px;
          cursor: ew-resize;
        }

        div.slider-decor {
          position: absolute;
          top: 50%;
          left: 25%;
          width: 50%;
          height: 100px;
          transform: translateY(-50%);
          background-color: var(--back);
          border-radius: 9999px;
        }

        div.slider:hover>div {
          background-color: white;
        }

        div.output {
            flex-grow: 1;
            height: 100%;
            border-radius: 10px;
            padding: 10px;
            margin: 0;
            outline: none;
            border: none;
            resize: none;
            color: white;
            background-color: var(--back);
            font-size: 15pt;
            z-index: 1000;
        }

        .tx-a {
          display: inline-block;
          color: var(--blue);
          z-index: 2;
        }

        .tx-s {
          display: inline-block;
          color: var(--green);
          z-index: 2;
        }
    </style>
  </head>
  <body>
    <h1 id="title">SAL Interpreter</h1>
    <div class="workspace">
      <div class="editor">
        <div id="code" class="code" placeholder="Enter some code here" type="textarea" contenteditable>Hello there</div>
        <div id="coloured" class="coloured">Hello there</div>
      </div>
      <div class="slider">
        <div class="slider-decor"></div>
      </div>
      <div class="output">Output here</div>
    </div>
    <script>

      document.getElementById("code").addEventListener("keyup", (function() {
        let text = this.innerText

        /*text = text
          .replaceAll("\n", "<br>")
          .replaceAll(" ", "&nbsp;");*/

        newtext = "";
        let include = true;
        for (let char of text) {
          if (char == "<") {
            include = false;
          } else if (char == ">") {
            include = true;
          } else if (char == "a" && include) {
            newtext += "<span class='tx-a'>a</span>"
          } else if (char == "s" && include) {
            newtext += "<span class='tx-s'>s</span>"
          } else if (include) {
            newtext += char;
          }
        }
        text = newtext;
        
        document.getElementById("coloured").innerHTML = text;
      }));
    </script>
  </body>
</html>